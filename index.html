<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>History Go</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b1725" />
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Theme -->
  <link rel="stylesheet" href="theme.css" />
</head>
<body>
  <!-- KART -->
  <div id="map" aria-label="Kart"></div>
  <button id="btnExitMap" class="map-exit" aria-label="Tilbake">✕</button>
  <button id="btnCenter" class="map-center" aria-label="Sentrer meg">◎</button>

  <!-- TOAST -->
  <div id="toast" role="status" aria-live="polite">OK</div>

  <!-- HEADER -->
  <header>
    <h1>History Go</h1>
    <button id="btnSeeMap" class="link-btn">Se kart</button>
  </header>

  <!-- INNHOLD -->
  <main>
    <div class="section row between">
      <div id="status" class="muted">Henter posisjon…</div>
      <label class="test small">Testmodus
        <input id="testToggle" type="checkbox" />
      </label>
    </div>

    <!-- Steder i nærheten -->
    <section class="section">
      <div class="title underline underline-blue">Steder i nærheten</div>
      <div id="nearbyList"></div>
      <div class="row right">
        <button id="btnSeeMoreNearby" class="ghost-btn">Se flere i nærheten</button>
      </div>
    </section>

    <!-- Min samling -->
    <section class="section">
      <div class="title underline underline-gold">Min samling ( <span id="collectionCount">0</span> )</div>
      <div id="collectionGrid" class="grid"></div>
      <div class="row right">
        <button id="btnMoreCollection" class="ghost-btn" style="display:none">+ flere</button>
      </div>
    </section>

    <!-- Merker -->
    <section class="section">
      <div class="title underline underline-soft">Merker</div>
      <div id="merits" class="merits"></div>
    </section>

    <!-- Galleri (personer) -->
    <section class="section">
      <div class="title underline underline-red">Galleri (personer)</div>
      <div id="gallery"></div>
    </section>
  </main>

  <!-- PLACE CARD -->
  <div id="placeCard" aria-hidden="true">
    <div class="pc-head">
      <div>
        <div id="pcTitle" class="pc-title">Tittel</div>
        <div id="pcMeta" class="pc-meta">Kategori • radius</div>
      </div>
      <button id="pcClose" class="pc-close" aria-label="Lukk">✕</button>
    </div>
    <div id="pcDesc" class="pc-desc">Beskrivelse…</div>
    <div class="pc-actions">
      <button id="pcMore" class="ghost-btn">Les mer</button>
      <button id="pcUnlock" class="primary-btn">Lås opp</button>
    </div>
  </div>

  <!-- SHEET: Flere i nærheten -->
  <div id="sheetNearby" class="sheet" aria-hidden="true">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title">Flere i nærheten</div>
        <button data-close="#sheetNearby" class="sheet-close">✕</button>
      </div>
      <div id="sheetNearbyBody"></div>
    </div>
  </div>

  <!-- SHEET: Samling -->
  <div id="sheetCollection" class="sheet" aria-hidden="true">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title">Samlingen din</div>
        <button data-close="#sheetCollection" class="sheet-close">✕</button>
      </div>
      <div id="sheetCollectionBody" class="grid"></div>
    </div>
  </div>

  <!-- QUIZ MODAL -->
  <div id="quizModal" aria-hidden="true" role="dialog" aria-label="Quiz">
    <div class="quiz-card">
      <div class="quiz-head">
        <div class="quiz-title" id="quizTitle">Quiz</div>
        <button class="quiz-close" id="quizClose" aria-label="Lukk">✕</button>
      </div>
      <div class="quiz-body">
        <div id="quizQuestion" class="quiz-q">…</div>
        <div id="quizChoices" class="quiz-choices"></div>
        <div id="quizProgress" class="quiz-progress"></div>
        <div id="quizFeedback" class="quiz-feedback"></div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      // Husk å bumpe versjon i sw.js når du endrer mye CSS/JS
      navigator.serviceWorker.register('./sw.js').catch(()=>{});
    }
  </script>
</body>
</html>
