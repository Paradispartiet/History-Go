<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>History Go</title>

  <!-- PWA -->
  <meta name="theme-color" content="#1976d2" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="theme.css" />
</head>
<body>
  <!-- MAP -->
  <div id="map" aria-label="Kart over Oslo"></div>

  <!-- Kart-knapper (vises kun i kart-modus) -->
  <button id="mapExit"   class="fab fab-exit"   aria-label="Lukk kart">âœ•</button>
  <button id="mapCenter" class="fab fab-center" aria-label="Sentrer pÃ¥ meg">ðŸŽ¯</button>
  <button id="mapFollow" class="fab fab-follow" aria-pressed="false" aria-label="FÃ¸lg meg">â–¶ï¸Ž</button>

  <!-- Toast -->
  <div id="toast" role="status" aria-live="polite"></div>

  <!-- HEADER -->
  <header>
    <h1>History Go</h1>
    <div class="right">
      <label class="toggle">
        <input id="testToggle" type="checkbox" />
        <span>Testmodus</span>
      </label>
      <button id="seeMapBtn" class="pill" aria-label="Se kart">Se kart</button>
    </div>
  </header>

  <!-- PANEL -->
  <main id="panel" role="main">
    <!-- NÃ†RHET -->
    <section class="section">
      <h2 class="section-title"><span>Severdigheter i nÃ¦rheten</span></h2>
      <div id="status" class="muted">Henter posisjonâ€¦</div>
      <div id="nearbyList"></div>
      <div id="nearbyMoreWrap" class="more-wrap" hidden>
        <button id="showMoreNearby" class="link-btn">Se flere i nÃ¦rheten</button>
      </div>
    </section>

    <!-- MIN SAMLING -->
    <section class="section">
      <h2 class="section-title"><span>Min samling <span id="collectionCount">0</span></span></h2>
      <div id="collection" class="chips"></div>
      <div id="moreCollectionWrap" hidden>
        <button id="showMoreCollection" class="link-btn">+<span id="moreCollectionN"></span> flere</button>
      </div>
    </section>

    <!-- MERKER (tidl. diplomer) -->
    <section class="section">
      <h2 class="section-title"><span>Merker</span></h2>
      <div id="badges" class="badge-grid"></div>
    </section>

    <!-- GALLERI -->
    <section class="section">
      <h2 class="section-title"><span>Galleri (personer)</span></h2>
      <div id="gallery" class="people-grid"></div>
    </section>
  </main>

  <!-- INFO-KORT (nederst) -->
  <aside id="placeCard" class="place-card" aria-live="polite" hidden>
    <div class="pc-title" id="pcTitle"></div>
    <div class="pc-meta"  id="pcMeta"></div>
    <div class="pc-desc"  id="pcDesc"></div>
    <div class="pc-actions">
      <button id="pcRead"  class="pill pill-ghost">Les mer</button>
      <button id="pcClose" class="pill">Lukk</button>
    </div>
  </aside>

  <!-- SHEET: fler i nÃ¦rheten -->
  <div id="moreNearbySheet" class="sheet" hidden aria-modal="true" role="dialog">
    <div class="sheet-inner">
      <div class="sheet-handle"></div>
      <h3>Flere i nÃ¦rheten</h3>
      <div id="moreNearbyList"></div>
      <button id="closeMoreNearby" class="pill full">Lukk</button>
    </div>
  </div>

  <script defer src="app.js"></script>
  <script>
    // SW registrering
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>
</html>
