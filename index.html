<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>History Go</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Stil -->
  <link rel="stylesheet" href="theme.css" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <!-- Kart i bakgrunnen -->
  <div id="map"></div>
  <button id="mapExit" class="map-exit" aria-label="Lukk kart">✕</button>

  <!-- Toast -->
  <div id="toast">OK</div>

  <!-- Topp -->
  <header>
    <h1>History Go</h1>
    <div class="row">
      <label class="test">Testmodus <input id="testToggle" type="checkbox"></label>
      <button id="toggleMap" class="link-btn">Se kart</button>
    </div>
  </header>

  <!-- Innholdspanel -->
  <main id="panel">
    <!-- Nærmest nå -->
    <section id="sec-nearby" class="section">
      <div class="title" role="button" tabindex="0" data-target="sec-nearby">Severdigheter i nærheten</div>
      <div id="status" class="muted">Henter posisjon…</div>
      <div id="list"></div>
    </section>

    <!-- Min samling -->
    <section id="sec-collection" class="section">
      <div class="title" role="button" tabindex="0" data-target="sec-collection">
        Min samling (<span id="count">0</span>)
      </div>
      <div class="grid" id="collection"></div>
      <button id="moreCollection" class="chip-more" style="display:none"></button>
    </section>

    <!-- Diplomer -->
    <section id="sec-diplomas" class="section">
      <div class="title" role="button" tabindex="0" data-target="sec-diplomas">Diplomer</div>
      <div id="diplomas" class="grid"></div>
    </section>

    <!-- Galleri -->
    <section id="sec-gallery" class="section">
      <div class="title" role="button" tabindex="0" data-target="sec-gallery">Galleri (personer)</div>
      <div id="gallery" class="grid"></div>
    </section>
  </main>

  <!-- Info-kort (dukker opp når man klikker markør/kort/badge) -->
  <div id="infoCard" class="info-card" aria-hidden="true">
    <div class="info-inner">
      <div class="info-header">
        <div>
          <div id="icTitle" class="ic-title">Tittel</div>
          <div id="icMeta"  class="ic-meta">Kategori • Sted</div>
        </div>
        <button id="infoClose" class="link-btn">Lukk</button>
      </div>
      <div id="icDesc" class="ic-desc">Beskrivelse her…</div>
      <div class="info-actions">
        <button id="icMore" class="btn primary">Les mer</button>
      </div>
    </div>
  </div>

  <!-- App -->
  <script src="app.js"></script>
  <script>
    // SW (behold / bump cache i sw.js)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>
</html>
