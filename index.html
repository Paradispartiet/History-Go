<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>History Go v14</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0d1b2a" />
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- App theme -->
  <link rel="stylesheet" href="theme.css" />
</head>
<body>
  <!-- KART -->
  <div id="map" aria-label="Kart"></div>

  <!-- KART-KNAPPER -->
  <div class="map-controls">
    <button id="btnSeeMap" class="link-btn" aria-label="Se kart">ğŸ—ºï¸ Se kart</button>
    <button id="btnExitMap" class="map-exit" aria-label="Tilbake">âœ•</button>
    <button id="btnCenter" class="map-center" aria-label="Sentrer meg">â—</button>
  </div>

  <!-- TOAST -->
  <div id="toast" role="status" aria-live="polite">OK</div>

  <!-- HEADER (minimalt) -->
  <header>
    <h1>History Go</h1>
    <label class="test small">Testmodus <input id="testToggle" type="checkbox" /></label>
  </header>

  <!-- INNHOLD -->
  <main>
    <div class="section row between">
      <div id="status" class="muted">Henter posisjonâ€¦</div>
    </div>

    <!-- Steder i nÃ¦rheten (viser 2) -->
    <section class="section">
      <div class="title underline underline-blue">Steder i nÃ¦rheten</div>
      <div id="nearbyList"></div>
      <div class="row right">
        <button id="btnSeeMoreNearby" class="ghost-btn">Se flere i nÃ¦rheten</button>
      </div>
    </section>

    <!-- Personer i nÃ¦rheten -->
    <section class="section">
      <div class="title underline underline-red">Personer i nÃ¦rheten</div>
      <div id="nearbyPeople"></div>
    </section>

    <!-- Min samling -->
    <section class="section">
      <div class="title underline underline-gold">Min samling (<span id="collectionCount">0</span>)</div>
      <div id="collectionGrid" class="grid icons-3"></div>
      <div class="row right">
        <button id="btnMoreCollection" class="ghost-btn" style="display:none">+ flere</button>
      </div>
    </section>

    <!-- Merker (poeng/nivÃ¥er) -->
    <section class="section">
      <div class="title underline underline-soft">Merker</div>
      <div id="merits" class="grid"></div>
    </section>

    <!-- Galleri: bare SAMLEDE personer -->
    <section class="section">
      <div class="title underline underline-violet">Samlede personer</div>
      <div id="gallery" class="grid icons-3"></div>
    </section>
  </main>

  <!-- PLACE INFO-CARD -->
  <div id="placeCard" aria-hidden="true">
    <div class="pc-head">
      <div>
        <div id="pcTitle" class="pc-title">Tittel</div>
        <div id="pcMeta" class="pc-meta">Kategori â€¢ radius</div>
      </div>
      <button id="pcClose" class="pc-close" aria-label="Lukk">âœ•</button>
    </div>
    <div id="pcDesc" class="pc-desc">Beskrivelseâ€¦</div>
    <div class="pc-actions">
      <a id="pcMore" href="#" target="_blank" rel="noopener" class="ghost-btn">Mer info</a>
      <button id="pcUnlock" class="primary-btn">LÃ¥s opp</button>
      <button id="pcRoute" class="link-btn">Vis rute</button>
    </div>
  </div>

  <!-- SHEET: Se flere i nÃ¦rheten -->
  <div id="sheetNearby" class="sheet" aria-hidden="true">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title">Flere i nÃ¦rheten</div>
        <button data-close="#sheetNearby" class="sheet-close">âœ•</button>
      </div>
      <div id="sheetNearbyBody"></div>
    </div>
  </div>

  <!-- SHEET: Flere i samlingen -->
  <div id="sheetCollection" class="sheet" aria-hidden="true">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title">Samlingen din</div>
        <button data-close="#sheetCollection" class="sheet-close">âœ•</button>
      </div>
      <div id="sheetCollectionBody" class="grid"></div>
    </div>
  </div>

  <!-- QUIZ MODAL -->
  <div id="quizModal" aria-hidden="true" role="dialog" aria-label="Quiz">
    <div class="quiz-card">
      <div class="quiz-head">
        <div class="quiz-title" id="quizTitle">Quiz</div>
        <button class="quiz-close" id="quizClose" aria-label="Lukk">âœ•</button>
      </div>
      <div class="quiz-body">
        <div id="quizQuestion" class="quiz-q">â€¦</div>
        <div id="quizChoices" class="quiz-choices"></div>
        <div id="quizProgress" class="quiz-progress"></div>
        <div id="quizFeedback" class="quiz-feedback"></div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(()=>{});
    }
  </script>
</body>
</html>
