<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>History Go</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#1976d2" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Theme -->
  <link rel="stylesheet" href="theme.css" />
</head>
<body>
  <!-- KART -->
  <div id="map" aria-label="Kart"></div>

  <!-- KART-KNAPPER (kun i kart-modus) -->
  <button id="btnExitMap" class="map-exit" aria-label="Tilbake">‚úï</button>
  <button id="btnCenter" class="map-center" aria-label="Sentrer meg">‚óé</button>
  <button id="btnFollow" class="map-follow" aria-label="Auto-follow">‚û§</button>

  <!-- TOAST -->
  <div id="toast" style="display:none;">OK</div>

  <!-- HEADER (minimal) -->
  <header>
    <h1>History Go</h1>
    <div class="header-actions">
      <button id="btnSeeMap" class="pill-btn">
        <span class="pill-ico">üó∫Ô∏è</span><span>Se kart</span>
      </button>
    </div>
  </header>

  <!-- INNHOLD -->
  <main>
    <!-- Status + test -->
    <div class="section row between">
      <div id="status" class="muted">Henter posisjon‚Ä¶</div>
      <label class="test small">
        Testmodus <input id="testToggle" type="checkbox" />
      </label>
    </div>

    <!-- Steder i n√¶rheten (viser 2) -->
    <section class="section">
      <div class="title underline underline-blue">
        Steder i n√¶rheten
      </div>
      <div id="nearbyList"></div>
      <div class="row right">
        <button id="btnSeeMoreNearby" class="ghost-btn">Se flere i n√¶rheten</button>
      </div>
    </section>

    <!-- Min samling (√©n rad + +N flere) -->
    <section class="section">
      <div class="title underline underline-gold">
        Min samling (<span id="collectionCount">0</span>)
      </div>
      <div id="collectionGrid" class="grid chips-row"></div>
      <div class="row right">
        <button id="btnMoreCollection" class="ghost-btn" style="display:none">+ flere</button>
      </div>
    </section>

    <!-- Merker (poeng/val√∏r per kategori) -->
    <section class="section">
      <div class="title underline underline-soft">Merker</div>
      <div id="merits" class="grid"></div>
    </section>

    <!-- Galleri (viser kun personer du har samlet) -->
    <section class="section">
      <div class="title underline underline-red">Galleri (personer)</div>
      <div id="gallery"></div>
    </section>
  </main>

  <!-- PLACE INFO-CARD (nederst) -->
  <div id="placeCard" aria-hidden="true">
    <div class="pc-head">
      <div>
        <div id="pcTitle" class="pc-title">Tittel</div>
        <div id="pcMeta" class="pc-meta">Kategori ‚Ä¢ radius</div>
      </div>
      <button id="pcClose" class="pc-close" aria-label="Lukk">‚úï</button>
    </div>
    <div id="pcDesc" class="pc-desc">Beskrivelse‚Ä¶</div>
    <div class="pc-actions">
      <button id="pcMore" class="ghost-btn">Les mer</button>
      <button id="pcUnlock" class="primary-btn">L√•s opp</button>
    </div>
  </div>

  <!-- SHEET: Se flere i n√¶rheten -->
  <div id="sheetNearby" class="sheet" aria-hidden="true">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title">Flere i n√¶rheten</div>
        <button data-close="#sheetNearby" class="sheet-close" aria-label="Lukk">‚úï</button>
      </div>
      <div id="sheetNearbyBody"></div>
    </div>
  </div>

  <!-- SHEET: Flere i samlingen -->
  <div id="sheetCollection" class="sheet" aria-hidden="true">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title">Samlingen din</div>
        <button data-close="#sheetCollection" class="sheet-close" aria-label="Lukk">‚úï</button>
      </div>
      <div id="sheetCollectionBody" class="grid"></div>
    </div>
  </div>

  <!-- QUIZ MODAL -->
  <div id="quizModal" aria-hidden="true" role="dialog" aria-label="Quiz">
    <div class="quiz-card" role="document">
      <div class="quiz-head">
        <div class="quiz-title" id="quizTitle">Quiz</div>
        <button class="quiz-close" id="quizClose" aria-label="Lukk">‚úï</button>
      </div>
      <div class="quiz-body">
        <div id="quizQuestion" class="quiz-q">‚Ä¶</div>
        <div id="quizChoices" class="quiz-choices"></div>
        <div id="quizProgress" class="quiz-progress"></div>
        <div id="quizFeedback" class="quiz-feedback" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(()=>{});
    }
  </script>
</body>
</html>
