/* ====== GLOBAL ====== */
:root{
  --bg:#0d1b2a;
  --panel:rgba(17,26,38,.86);         /* litt lysere glass enn før */
  --panel-brd:#1e3142;
  --ink:#e8eef7;
  --muted:#b7c2cf;
  --accent:#ffb703;
  --blue:#4b8bd9;
  --green:#4bbf9c;
  --red:#e3646a;
  --yellow:#e7b44a;
  --chipAlpha:.88;                     /* mildere chips */
  --radius:16px;
  --shadow:0 12px 28px rgba(0,0,0,.25);
}

html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
*{box-sizing:border-box}

/* ====== MAP ====== */
#map{
  position:fixed;inset:0;z-index:0;
  filter: blur(2px) saturate(1.04) brightness(0.96);
  opacity:.96;
}
body.map-only #map{ filter:none; opacity:1; }

/* Floating buttons (kartmodus) */
.fab{
  position:fixed;z-index:20;border:0;border-radius:999px;
  width:46px;height:46px;box-shadow:var(--shadow);
  background:#111a;backdrop-filter:blur(6px);color:#fff;cursor:pointer;
}
.fab-exit{ top:12px; right:12px; }
.fab-center{ bottom:84px; right:12px; }
.fab-follow{ bottom:24px; right:12px; }
body:not(.map-only) .fab{ display:none; }
.fab[aria-pressed="true"]{ outline:3px solid var(--accent); }

/* ====== TOAST ====== */
#toast{
  position:fixed;left:50%;top:12px;transform:translateX(-50%);z-index:50;
  background:#1976d2;color:#fff;padding:8px 12px;border-radius:12px;display:none;font-weight:800
}

/* ====== HEADER ====== */
header{
  position:relative;z-index:2;margin:8px 8px 0 8px;
  background:var(--panel);border:1px solid var(--panel-brd);border-radius:var(--radius);
  padding:10px 12px;display:flex;align-items:center;justify-content:space-between;backdrop-filter:blur(8px)
}
h1{margin:0;font-size:18px;font-weight:900}
.right{display:flex;gap:10px;align-items:center}
.toggle input{transform:translateY(1px);margin-right:6px}
.pill{border:0;background:#fff1;color:#fff;padding:8px 12px;border-radius:999px;font-weight:900;backdrop-filter:blur(6px);border:1px solid #fff2}
.pill-ghost{background:transparent;border:1px solid #fff4}
.pill.full{width:100%}

/* ====== MAIN PANEL ====== */
main{
  position:relative;z-index:1;margin:8px;padding:12px;border-radius:var(--radius);
  background:var(--panel);border:1px solid var(--panel-brd);box-shadow:var(--shadow)
}
.section{margin:14px 4px 18px}
.section-title{
  margin:0 0 10px 0; font-weight:900; font-size:15px;
  border-bottom:3px solid #ffffff1f; padding-bottom:6px;
}
.section-title > span{display:inline-block;border-bottom:3px solid var(--accent);padding-bottom:3px}
.muted{color:var(--muted)}

/* Nærhetskort */
.card{
  background:#101a2a;border:1px solid #1d2b3b;border-radius:14px;padding:14px;margin:10px 0
}
.card .title{font-weight:900}
.card .meta{color:var(--muted);margin-top:4px}
.card .desc{color:#e3e8ef;margin-top:8px}
.card .dist{color:var(--accent);font-weight:900;margin-top:10px}

/* Chips (samling) */
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip{
  display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:999px;font-weight:800;border:1px solid #ffffff2b;cursor:pointer
}
.chip.blue{ background:rgba(75,139,217,var(--chipAlpha)); }
.chip.red{  background:rgba(227,100,106,var(--chipAlpha)); }
.chip.green{background:rgba(75,191,156,var(--chipAlpha)); }
.chip.yellow{background:rgba(231,180,74,var(--chipAlpha)); }
.chip .ico{opacity:.9}

/* Merker */
.badge-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}
.badge{
  background:#101a2a;border:1px solid #1d2b3b;border-radius:14px;padding:14px
}
.badge .name{font-weight:900;margin-bottom:6px}
.progress{height:8px;border-radius:999px;background:#ffffff17;overflow:hidden;margin:6px 0 2px}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,#ffd36a,#ffb703)}
.small{color:var(--muted)}

/* People */
.people-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.person{
  display:flex;gap:12px;align-items:center;background:#101a2a;border:1px solid #1d2b3b;border-radius:14px;padding:12px
}
.person .avatar{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;background:#1976d2;color:#fff}
.person .pname{font-weight:900}

/* Sheet (flere i nærheten) */
.sheet{position:fixed;inset:0;display:grid;place-items:end center;background:rgba(0,0,0,.25);z-index:30}
.sheet-inner{width:100%;max-width:680px;background:#0f1928;border-radius:18px 18px 0 0;border:1px solid #203245;padding:12px 12px 18px}
.sheet-handle{width:64px;height:5px;border-radius:99px;background:#ffffff29;margin:6px auto 10px}
.sheet[hidden]{display:none}
.more-wrap{margin-top:6px}

/* Place-card (nederst) */
.place-card{
  position:fixed;left:12px;right:12px;bottom:12px;z-index:25;background:#0f1928;border:1px solid #203245;border-radius:14px;padding:12px;box-shadow:var(--shadow)
}
.pc-title{font-weight:900;margin-bottom:4px}
.pc-meta{color:var(--muted);margin-bottom:6px}
.pc-actions{display:flex;gap:8px}
.place-card[hidden]{display:none}

/* Map-only: skjul panel/header */
body.map-only main, body.map-only header{display:none}
