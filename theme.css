/* ===== Base ===== */
:root{
  --bg:#0d1b2a;
  --panel: rgba(13,27,42,.92);
  --panel-brd:#1e3142;
  --panel-soft:#132235;
  --txt:#e8eef7;
  --muted:#b7c2cf;
  --gold:#ffb703;
  --blue:#1976d2;
  --red:#e63946;
  --green:#4caf50;
  --teal:#2a9d8f;
  --violet:#9b59b6;
  --hist:#1976d2; /* default */
}
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; height:100%; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--txt); background:var(--bg); }
#map{ position:fixed; inset:0; z-index:0; filter: saturate(1.05) brightness(.96) contrast(1.02) blur(0.8px); }

/* Toast */
#toast{
  position:fixed; left:50%; top:12px; transform:translateX(-50%);
  background:var(--blue); color:#fff; padding:8px 12px; border-radius:10px; display:none; z-index:1000; font-weight:800;
}

/* Header */
header{
  position:relative; z-index:2; background:var(--panel); backdrop-filter: blur(4px);
  border-bottom:1px solid var(--panel-brd);
  padding:10px 14px; display:flex; align-items:center; justify-content:space-between;
}
h1{ margin:0; font-size:18px; font-weight:900; }
.header-actions{ display:flex; gap:8px; align-items:center; }
.test.small{ color:var(--muted); font-size:13px; display:flex; gap:6px; align-items:center; }

/* Buttons */
.link-btn, .ghost-btn, .primary-btn{
  padding:8px 12px; border-radius:12px; font-weight:800; cursor:pointer; border:1px solid transparent;
}
.link-btn{ background:transparent; color:#fff; border-color:#2a3b4d; }
.ghost-btn{ background:transparent; color:#fff; border-color:#38516b; }
.primary-btn{ background:var(--gold); color:#111; border-color:#c99606; }

.row{ display:flex; align-items:center; gap:8px; }
.row.right{ justify-content:flex-end; }
.row.between{ justify-content:space-between; }

/* Main/panel */
main{
  position:relative; z-index:1; margin:12px;
  background:var(--panel); border:1px solid var(--panel-brd); border-radius:16px;
  padding:12px; box-shadow:0 12px 30px rgba(0,0,0,.28);
  backdrop-filter: blur(3px);
}
.section{ margin-bottom:16px; }
.muted{ color:var(--muted); }

.title{
  display:inline-block; background:var(--gold); color:#111; padding:6px 10px; border-radius:12px; font-weight:900; margin-bottom:8px;
}
.underline{ position:relative; }
.underline::after{
  content:""; position:absolute; left:10px; right:10px; bottom:-4px; height:3px; border-radius:3px; opacity:.75;
}
.underline-blue::after{ background:#5fb0ff; }
.underline-gold::after{ background:#ffdc82; }
.underline-soft::after{ background:#d0d7e2; }
.underline-red::after{ background:#ff8a8a; }

/* Cards */
.card{
  background:#132235; border:1px solid var(--panel-brd); border-radius:14px; padding:12px; margin-bottom:10px;
}
.name{ font-weight:900; }
.meta{ color:var(--muted); margin-top:2px; }
.desc{ color:#e3e8ef; margin-top:6px; }
.dist{ color:var(--gold); font-weight:900; margin-top:6px; }

/* Grids */
.grid{ display:flex; flex-wrap:wrap; gap:8px; }
.badge{
  background:#1b263b; color:#fff; padding:8px 10px; border-radius:12px; border:1px solid #253547; font-weight:800; white-space:nowrap;
}
.badge .i{ display:inline-block; width:10px; height:10px; border-radius:999px; margin-right:6px; vertical-align:middle; }

/* Icon tiles (Mine steder / Mine personer) */
.icon-grid{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px; }
.icon-tile{
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px;
  background:#132235; border:1px solid var(--panel-brd); border-radius:14px; padding:10px; text-align:center; cursor:pointer;
}
.icon-round{ width:64px; height:64px; border-radius:999px; display:flex; align-items:center; justify-content:center; border:2px solid #0b1724; box-shadow:0 4px 12px rgba(0,0,0,.22) inset; }
.icon-round svg{ width:30px; height:30px; }
.icon-name{ font-size:12px; color:#d8e3ef; line-height:1.2; max-height:2.4em; overflow:hidden; text-overflow:ellipsis; }

/* Place card */
#placeCard{
  position:fixed; left:12px; right:12px; bottom:12px; z-index:9999;
  background:#0f2032; border:1px solid var(--panel-brd); border-radius:16px; padding:12px; box-shadow:0 16px 36px rgba(0,0,0,.35);
  transform: translateY(16px); opacity:0; pointer-events:none; transition:.2s ease;
}
#placeCard[aria-hidden="false"]{ transform: translateY(0); opacity:1; pointer-events:auto; }
.pc-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.pc-title{ font-weight:900; font-size:16px; }
.pc-meta{ color:var(--muted); font-size:12px; margin-top:2px; }
.pc-desc{ margin-top:8px; color:#e3e8ef; }
.pc-actions{ display:flex; gap:8px; margin-top:10px; }
.pc-close{ border:0; background:#09131e; color:#fff; width:36px; height:36px; border-radius:999px; cursor:pointer; }

/* Sheets & Modal */
.sheet{ position:fixed; inset:0; background:rgba(0,0,0,.25); z-index:9998; display:none; }
.sheet[aria-hidden="false"]{ display:block; }
.sheet-card{
  position:absolute; left:0; right:0; bottom:0; background:#0f2032; border-top:1px solid var(--panel-brd);
  border-radius:16px 16px 0 0; padding:12px; max-height:68%; overflow:auto;
}
.sheet-head{ display:flex; align-items:center; justify-content:space-between; }
.sheet-title{ font-weight:900; }
.sheet-close{ border:0; background:#09131e; color:#fff; width:36px; height:36px; border-radius:999px; cursor:pointer; }

/* Filter body */
.filter-body{ display:flex; flex-direction:column; gap:10px; }
.filter-row{ display:flex; flex-wrap:wrap; gap:12px; }

/* Quiz */
#quizModal{ position:fixed; inset:0; background:rgba(0,0,0,.25); z-index:99999; display:none; }
#quizModal[aria-hidden="false"]{ display:block; }
.quiz-card{
  position:absolute; left:12px; right:12px; bottom:12px; background:#0f2032; border:1px solid var(--panel-brd);
  border-radius:16px; padding:12px; box-shadow:0 16px 36px rgba(0,0,0,.35);
}
.quiz-head{ display:flex; align-items:center; justify-content:space-between; }
.quiz-title{ font-weight:900; }
.quiz-close{ border:0; background:#09131e; color:#fff; width:36px; height:36px; border-radius:999px; cursor:pointer; }
.quiz-q{ margin:10px 0; }
.quiz-choices{ display:grid; gap:8px; }
.quiz-choices button{ padding:10px; border-radius:12px; border:1px solid #2a3b4d; background:#132235; color:#fff; cursor:pointer; }
.quiz-choices button.correct{ border-color:#00e676; box-shadow: 0 0 0 2px rgba(0,230,118,.2); }
.quiz-choices button.wrong{ border-color:#ff6b6b; box-shadow: 0 0 0 2px rgba(255,107,107,.2); }
.quiz-progress{ color:#9fb3c6; font-size:12px; margin-top:6px; }
.quiz-feedback{ margin-top:8px; }

/* Kartmodus */
.map-exit, .map-center, .map-filter, .map-clear{
  position:fixed; z-index:10000; display:none; width:40px; height:40px; border-radius:999px; border:0; cursor:pointer; color:#fff;
  background:#111; opacity:.92;
}
.map-exit{ top:12px; right:12px; }
.map-center{ bottom:12px; right:12px; }
.map-filter{ bottom:60px; right:12px; }
.map-clear{ bottom:108px; right:12px; }

.map-only header, .map-only main{ display:none; }
.map-only #map{ filter:none; }
.map-only .map-exit, .map-only .map-center, .map-only .map-filter, .map-only .map-clear{ display:block; }

/* Helpers for category color rings */
.ring-hist{ outline:3px solid #1976d2; }
.ring-kult{ outline:3px solid #e63946; }
.ring-sport{ outline:3px solid #2a9d8f; }
.ring-natur{ outline:3px solid #4caf50; }
.ring-urban{ outline:3px solid #ffb703; }
.ring-viten{ outline:3px solid #9b59b6; }
