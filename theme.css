/* ===================================================== */
/* HISTORY GO – THEME.CSS (REN OG STABIL VERSJON)        */
/* ===================================================== */
/*
1.  Variabler & grunnstil
2.  Kart & kartmodus
3.  Topplinje, main & toast
4.  Paneler, kort, rutenett
5.  Knapper & chips/badges
6.  Place Card (sheet)
7.  Place Overlay
8.  Sheets (bunnark)
9.  Modal (quiz)
10. Quiz-stiler
11. Merker / badge-kort
12. Effekter & media
*/

/* ===================================================== */
/* 1) Variabler & grunnstil                              */
/* ===================================================== */
:root{
  --bg: #0a1929;
  --panel: rgba(13,27,42,.86);
  --panel-border: rgba(255,255,255,.08);
  --text: #e6eef9;
  --muted: #9bb0c9;
  --primary: #1976d2;
  --ok: #2ecc71;
  --warn: #ffb703;

  --hist: #1976d2;
  --kult: #e63946;
  --sport: #2a9d8f;
  --natur: #4caf50;
  --urban: #ffb703;
  --viten: #9b59b6;

  --radius: 12px;
  --shadow: 0 10px 24px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}
.muted{color:var(--muted)}

/* ===================================================== */
/* Fast sort bakgrunn + subtil farget kant (kategori)     */
/* ===================================================== */
.app-frame {
  position: fixed;
  inset: 0;
  pointer-events: none;       /* lar alt under fungere som vanlig */
  background: #000;           /* helsvart bakgrunn */
  box-shadow: 0 0 0 3px var(--primary); /* tynn farget kant */
  border-radius: 0;           /* dekker helt ut til kanten */
  transition: box-shadow 0.4s ease;
  z-index: 0;                 /* bak alt innhold */
}
/* Links */
a{color:#8ec6ff;text-decoration:none}
a:hover{text-decoration:underline}

/* ===================================================== */
/* 2) Kart & kartmodus                                   */
/* ===================================================== */
#map{ position:fixed; inset:0; z-index:0; }

.map-controls{
  position:fixed; right:12px; bottom:12px; z-index:12;
  display:grid; gap:8px;
}
.map-controls button{
  width:44px; height:44px; border-radius:999px;
  border:1px solid var(--panel-border);
  background: rgba(20,30,45,.9); color:#fff;
  box-shadow: var(--shadow);
}

/* Kartmodus – ENESTE sannhet: 'map-only' */
#btnExitMap{ display:none }
body.map-only header,
body.map-only main{ display:none !important }
body.map-only #btnExitMap{ display:block !important }
body.map-only #btnSeeMap{ display:none !important }

/* ===================================================== */
/* Kartmodus – sørg for at modaler fortsatt vises        */
/* ===================================================== */
body.map-only #quizModal,
body.map-mode #quizModal {
  display: flex !important;   /* tving visning selv om main/header er skjult */
  z-index: 9999 !important;   /* hold modalen over kart og kontroller */
}

/* ===================================================== */
/* 3) Topplinje, main & toast                            */
/* ===================================================== */
header{
  position:relative; z-index:5;
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 14px;
  background: linear-gradient(180deg, rgba(10,25,41,.95), rgba(10,25,41,.65) 70%, transparent);
}
.brand{ font-weight:800; letter-spacing:.3px }
.actions{ display:flex; gap:10px; align-items:center }
.toggle{ display:flex; gap:6px; align-items:center; font-size:.9rem }
.toggle input{ accent-color: var(--primary) }

main{ position:relative; z-index:5; padding:8px 10px 56px }

#toast{
  position:fixed; top:14px; left:50%; transform:translateX(-50%);
  background: rgba(0,0,0,.72); color:#fff;
  padding:8px 14px; border-radius:999px; font-weight:700;
  display:none; z-index:15;
}

/* ===================================================== */
/* 4) Paneler, kort, rutenett                            */
/* ===================================================== */
.panel{
  background: var(--panel);
  border:1px solid var(--panel-border);
  border-radius: var(--radius);
  padding:12px; margin:10px 0;
  box-shadow: var(--shadow);
  backdrop-filter: blur(2px);
}
.panel h2{
  display:flex; align-items:center; justify-content:space-between;
  margin:6px 2px 12px; font-size:1rem;
}

.cards{ display:grid; gap:10px }
.card{
  background: rgba(255,255,255,.02);
  border:1px solid var(--panel-border);
  border-radius: var(--radius);
  padding:12px;
}
.card .name{ font-weight:700 }
.card .meta{ color:var(--muted); font-size:.9rem; margin:2px 0 4px }
.card .row{ display:flex; gap:8px; align-items:center }
.card .row.between{ justify-content:space-between }

/* ===================================================== */
/* 5) Knapper & chips/badges                             */
/* ===================================================== */
button{ cursor:pointer; border:none }
.primary{
  background: var(--primary); color:#fff;
  padding:10px 14px; border-radius:10px; font-weight:600;
}
.secondary{
  background: rgba(255,255,255,.08); color:#fff;
  padding:10px 14px; border-radius:10px;
  border:1px solid var(--panel-border);
}
.ghost{
  background: transparent; color:#fff;
  padding:8px 12px; border-radius:999px;
  border:1px solid var(--panel-border);
}
.icon{
  width:44px; height:44px; border-radius:999px;
  background: rgba(255,255,255,.08); color:#fff;
  border:1px solid var(--panel-border);
  display:flex; align-items:center; justify-content:center;
  font-size:1.2rem;
}

.chips{ display:flex; flex-wrap:wrap; gap:8px }
.badge{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  border:1px solid var(--panel-border);
  background: rgba(255,255,255,.02);
  font-size:.92rem;
}
.badge .i{
  width:22px; height:22px; border-radius:999px;
  display:inline-block; border:2px solid rgba(0,0,0,.55);
}
.badge.kult .i{ background: var(--kult) }
.badge.urban .i{ background: var(--urban) }
.badge.sport .i{ background: var(--sport) }
.badge.natur .i{ background: var(--natur) }
.badge.viten .i{ background: var(--viten) }
.badge.hist .i{ background: var(--hist) }



/* ===================================================== */
/* 7) Place Overlay                                      */
/* ===================================================== */
.place-overlay{
  position:fixed; inset:0; z-index:14; background:rgba(0,0,0,.55);
  display:flex; align-items:flex-end; justify-content:center;
}
.place-overlay .place-overlay-content{
  width:min(960px, 96vw); max-height:82vh;
  background:var(--panel);
  border:1px solid var(--panel-border);
  border-radius:16px 16px 0 0;
  box-shadow:var(--shadow);
  display:grid; grid-template-columns: 1.2fr .8fr; gap:16px;
  padding:16px; overflow:auto;
}
.close-overlay{
  position:absolute; top:12px; right:12px;
  width:44px; height:44px; border-radius:999px;
  border:1px solid var(--panel-border);
  background:rgba(255,255,255,.08); color:#fff; font-size:1.4rem;
}
.place-overlay .left p{ line-height:1.5 }
.place-overlay .right .card{ margin-bottom:10px }

/* ===================================================== */
/* 8) Sheets (bunnark)                                   */
/* ===================================================== */
.sheet{
  position:fixed; left:0; right:0; bottom:0; z-index:13;
  background: var(--panel);
  border:1px solid var(--panel-border);
  border-radius: 16px 16px 0 0;
  box-shadow: var(--shadow);
  transform: translateY(100%); opacity:0;
  transition: transform .22s ease, opacity .2s ease;
}
.sheet[aria-hidden="false"]{ transform:none; opacity:1 }
.sheet-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 14px; border-bottom:1px solid var(--panel-border)
}
.sheet-body{ padding:12px 14px }

/* Close-knapper som ikoner */
.sheet-close{
  width:44px; height:44px; border-radius:999px;
  border:1px solid var(--panel-border);
  background:rgba(255,255,255,.08); color:#fff; font-size:1.4rem;
}

/* ===================================================== */
/* 9) Modal (quiz)                                       */
/* ===================================================== */
.modal{
  position:fixed; inset:0; z-index:9999; display:none;
  background: rgba(0,0,0,.55);
}
.modal[aria-hidden="false"]{ display:block }
.modal .modal-body{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:min(680px, 92vw);
  background: var(--panel);
  border:1px solid var(--panel-border);
  border-radius: 14px;
  box-shadow: var(--shadow);
  padding:14px;
}
.modal-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  margin-bottom:8px;
}
#quizClose {
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: rgba(255,255,255,.08);
  color: #fff;
  font-size: 1.4rem;
}

/* ===================================================== */
/* 10) Quiz-stiler                                       */
/* ===================================================== */
#quizProgress{ color:var(--muted); margin-bottom:6px }
#quizQuestion{ margin:8px 0 10px; font-weight:700 }
.quiz-choices{
  display:grid; gap:8px;
}
.quiz-choices button{
  text-align:left; width:100%;
  padding:10px 12px; border-radius:10px; border:1px solid var(--panel-border);
  background: rgba(255,255,255,.03); color:#fff;
}
.quiz-choices button.correct{
  border-color:#1b7a4a; background: rgba(27,122,74,.18);
}
.quiz-choices button.wrong{
  border-color:#7a1f25; background: rgba(122,31,37,.18);
}
.quiz-feedback{ min-height:1.2em; font-weight:700 }

/* ===================================================== */
/* 10b) Quiz-progress-bar                                */
/* ===================================================== */
.quiz-progress {
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,.1);
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 10px;
}
.quiz-progress .bar {
  height: 100%;
  width: 0%;
  background: var(--primary);
  transition: width .4s ease;
}

/* ===================================================== */
/* 11) Merker / badge-kort                               */
/* ===================================================== */
.merkesamling-title {
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-weight: 600;
  font-size: 1.4rem;
  color: var(--yellow);
  display: flex;
  align-items: center;
  justify-content: space-between;
  letter-spacing: 0.3px;
  margin-bottom: 0.8rem;
}

#merits{ display:grid; gap:10px }
.badge-card{
  display:flex; gap:12px; align-items:center;
  background: rgba(255,255,255,.02);
  border:1px solid var(--panel-border);
  border-radius: var(--radius);
  padding:10px;
}
.badge-icon-ring{
  width:42px; height:42px; border-radius:999px;
  display:flex; align-items:center; justify-content:center;
  border:3px solid var(--primary);
}
.badge-icon{ font-size:1.2rem }
.badge-info small{ color:var(--muted) }

/* Puls ved nivåoppnåelse */
@keyframes badgePulse{
  0%{transform:scale(1); box-shadow:0 0 0 0 rgba(255,255,255,0)}
  40%{transform:scale(1.06); box-shadow:0 0 10px 4px rgba(255,255,255,.16)}
  100%{transform:scale(1); box-shadow:0 0 0 0 rgba(255,255,255,0)}
}
.badge-pulse{ animation: badgePulse 1.2s ease-out }

/* ===================================================== */
/* 12) Effekter & media                                  */
/* ===================================================== */
@media (max-width:760px){
  .place-overlay .place-overlay-content{ grid-template-columns:1fr; max-height:80vh }
}

.icon:hover,
.sheet-close:hover,
#quizClose:hover,
#pcClose:hover,
#btnExitMap:hover{
  filter:brightness(1.1);
}
body.map-only #map {
  z-index: 10 !important;
}

/* ===================================================== */
/* 13) Person-popup ved fullført quiz                    */
/* ===================================================== */
.person-popup {
  position: fixed;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%) scale(.8);
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  text-align: center;
  opacity: 0;
  transition: all .25s ease;
  z-index: 10001;
  padding: 20px;
}
.person-popup.visible {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}
.person-popup img {
  width: 80px; height: 80px;
  border-radius: 999px;
  margin-bottom: 8px;
  object-fit: cover;
  
}/* Dynamisk kategori-farge via --primary */
body.kunst .app-frame         { --primary: #ffb703; }
body.litteratur .app-frame    { --primary: #f6c800; }
body.musikk .app-frame        { --primary: #ff66cc; }
body.sport .app-frame         { --primary: #2a9d8f; }
body.natur .app-frame         { --primary: #4caf50; }
body.vitenskap .app-frame     { --primary: #9b59b6; }
body.politikk .app-frame      { --primary: #c77dff; }
body.populaerkultur .app-frame{ --primary: #ffb703; }
body.subkultur .app-frame     { --primary: #ff66cc; }
body.by .app-frame            { --primary: #e63946; }
