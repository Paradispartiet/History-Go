/* ====== Variabler ====== */
:root{
  --blue:#1976d2; --blue-90:#1976d2e6;
  --yellow:#ffb703; --yellow-85:#ffb703d9;
  --green:#2a9d8f;
  --bg-deep:#0d1b2a;
  --panel:#12263aE6;
  --line:#1e3142; --line-soft:#23384c;
  --text:#ffffff; --muted:#b7c2cf;
  --shadow:0 10px 28px rgba(0,0,0,.25);
  --radius:14px; --radius-sm:10px;
}

/* ====== Base ====== */
html,body{height:100%;margin:0}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg-deep);color:var(--text)}

/* ====== Kart ====== */
#map{position:fixed; inset:0; z-index:0}
#overlay{
  position:fixed; inset:0; z-index:1;
  background:rgba(255,255,255,.10);
  pointer-events:none;
}

/* ====== Toast ====== */
#toast{
  position:fixed; left:50%; top:12px; transform:translateX(-50%);
  background:var(--blue); color:#fff; padding:8px 12px; border-radius:8px;
  display:none; z-index:5; font-weight:800; box-shadow:var(--shadow);
}

/* ====== Panel ====== */
#panel{
  position:relative; z-index:2; margin:12px;
  background:var(--panel); border:1px solid var(--line);
  border-radius:var(--radius); padding:12px; box-shadow:var(--shadow);
}
.section{ margin-bottom:16px }
.section.small{ opacity:.9; font-size:13px }
.title{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px }
.title .title-text{
  padding:6px 10px; border-radius:999px;
  font-weight:900; color:#111; background:var(--yellow-85);
}
.muted{ color:var(--muted) }

/* ====== Lenke-knapper ====== */
.link-btn{
  background:transparent; border:1px solid var(--line);
  color:#e8eef7; padding:6px 10px; border-radius:8px; font-weight:800; cursor:pointer;
}

/* ====== Kort ====== */
.card{
  background:#172638; border:1px solid var(--line-soft);
  border-radius:var(--radius-sm); padding:12px; margin-bottom:10px;
}
.name{ font-weight:900 }
.meta{ color:var(--muted); margin-top:2px }
.desc{ color:#e3e8ef; margin-top:6px }
.dist{ color:var(--yellow); font-weight:900; margin-top:6px }

/* ====== Grid/Badges ====== */
.grid{ display:flex; flex-wrap:wrap; gap:8px }
.grid.one-row{ flex-wrap:nowrap; overflow-x:auto; scrollbar-width:none }
.grid.one-row::-webkit-scrollbar{ display:none }

.badge{
  background:#1f3a57e0; color:#fff; padding:8px 10px; border-radius:999px;
  font-weight:800; white-space:nowrap; border:1px solid var(--line-soft);
}

/* ====== MERKER (tidl. diplomer) ====== */
.diploma{
  min-width:260px; background:#172638; border:1px solid var(--line-soft);
  border-radius:var(--radius-sm); padding:12px;
  box-shadow: inset 4px 0 0 0 transparent;
}
.diploma .name{ display:flex; align-items:center; gap:8px }
.tier{ font-weight:900; }
.progress{ margin-top:8px; height:6px; background:#0f1e2e; border-radius:999px; overflow:hidden; border:1px solid var(--line) }
.progress > span{ display:block; height:100%; background:linear-gradient(90deg, #ffb703, #ffe08a) }

/* ====== Personkort ====== */
.person-card{
  background:#172638; border:1px solid var(--line-soft); border-radius:var(--radius-sm);
  padding:12px; display:flex; align-items:center; gap:12px;
}
.avatar{
  width:44px; height:44px; border-radius:50%; background:var(--blue); color:#fff;
  display:flex; align-items:center; justify-content:center; font-weight:900; flex-shrink:0;
}
.person-btn{ margin-left:auto; border:0; border-radius:10px; padding:8px 12px; background:var(--yellow-85); color:#111; font-weight:900 }

/* ====== FAB & Kartmodus ====== */
#fabMap{
  position:fixed; right:14px; bottom:18px; z-index:3;
  width:56px; height:56px; border-radius:50%; border:0;
  background:var(--blue); color:#fff; font-size:22px; font-weight:800;
  box-shadow:var(--shadow); cursor:pointer;
}
#centerBtn{
  position:fixed; left:14px; bottom:18px; z-index:3;
  width:48px; height:48px; border-radius:50%; border:0;
  background:#0d1b2a; color:#fff; font-size:20px; font-weight:800;
  box-shadow:var(--shadow); cursor:pointer;
}
#centerBtn[hidden]{ display:none }
#centerBtn.active{ background:var(--green) }

/* Map-only */
body.map-only #panel{ display:none }
body.map-only #overlay{ background:transparent }
body.map-only #centerBtn{ display:block }

/* ====== Info-kort ====== */
#infoCard{
  position:fixed; left:12px; right:12px; bottom:12px; z-index:4;
  background:#15263ae6; border:1px solid var(--line); border-radius:16px; padding:12px;
  box-shadow:var(--shadow);
}
#infoCard[hidden]{ display:none }
.info-header{ display:flex; align-items:center; gap:10px }
.info-title{ font-weight:900 }
.info-meta{ color:var(--muted); font-size:13px }
.info-close{
  margin-left:auto; background:transparent; border:1px solid var(--line);
  color:#e8eef7; width:32px; height:32px; border-radius:8px; cursor:pointer;
}
.info-desc{ color:#e3e8ef; margin-top:8px }
.info-actions{ display:flex; gap:8px; margin-top:10px }
button.primary{ background:var(--blue); color:#fff; border:0; padding:10px 14px; border-radius:10px; font-weight:800; cursor:pointer }
button.ghost{ background:transparent; color:#e8eef7; border:1px solid var(--line); padding:10px 14px; border-radius:10px; font-weight:800; cursor:pointer }

/* ====== Dialog (Se flere / Quiz) ====== */
dialog{ border:1px solid var(--line); border-radius:14px; padding:0; background:#12263a; color:#fff; width:min(720px, 92vw); }
dialog::backdrop{ background:rgba(0,0,0,.35) }
.sheet-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:12px; border-bottom:1px solid var(--line); }
.sheet-close{ background:transparent; border:1px solid var(--line); color:#e8eef7; padding:6px 10px; border-radius:8px; cursor:pointer; }
#nearbySheetList, .quiz-body{ padding:12px }

/* Personer i info-kort */
.info-people{ margin-top:10px }
.info-people-title{ font-weight:900; margin-bottom:6px }
.info-people-list{ display:flex; flex-wrap:wrap; gap:8px }
.person-chip{
  border:1px solid var(--line); color:#e8eef7; background:transparent;
  padding:8px 10px; border-radius:999px; font-weight:800; cursor:pointer;
}

/* Quiz */
.quiz-q{ font-weight:900; margin:0 0 8px 0 }
.quiz-options{ display:grid; gap:8px }
.quiz-option{
  text-align:left; border:1px solid var(--line); background:#172638; color:#e8eef7;
  padding:10px 12px; border-radius:10px; font-weight:800; cursor:pointer;
}
.quiz-hint{ margin-top:8px; color:var(--muted) }
